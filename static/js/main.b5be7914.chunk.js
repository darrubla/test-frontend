(this["webpackJsonptest-frontend"]=this["webpackJsonptest-frontend"]||[]).push([[0],{114:function(e,t,n){},115:function(e,t,n){},137:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(42),o=n.n(a),i=(n(114),n(115),n(49)),s=n(22),u=n(15),l=n(204),d=n(203),f=n(69),j=n(0),b=n.n(j),p=n(2),h=n(80),O=(n(117),n(170),n(63)),v=function(e,t,n){O.b[{success:"success",error:"error",info:"info"}[e]](t,{toastId:n})},m=n(46),x=h.a.initializeApp({apiKey:"AIzaSyChPfb0-bn7Wgji2NDlJKKvSeD7ZUhuWk0",authDomain:"test-front-beccd.firebaseapp.com",projectId:"test-front-beccd",storageBucket:"test-front-beccd.appspot.com",messagingSenderId:"389550173889",appId:"1:389550173889:web:f90b37bece219bb53d6e40"}),g=x.auth(),k=x.firestore(),w=new h.a.auth.GoogleAuthProvider,_=function(){var e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.signInWithPopup(w);case 3:return t=e.sent,n=t.user,e.next=7,k.collection("users").where("uid","==",n.uid).get();case 7:if(0!==e.sent.docs.length){e.next=11;break}return e.next=11,k.collection("users").add({uid:n.uid,name:n.displayName,authProvider:"google",email:n.email});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v("error","!Upss el usuario no se ha podido conectar, por favor verifica tus datos!","error_adding_favorite");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.signInWithEmailAndPassword(t,n);case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),v("error","!Upss el usuario no existe en nuestra base, por favor revisa tus datos!","error_auth");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.d)(Object(m.c)(k,"usuarios",n),{favorites:[t]});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),v("error","!Upss ha ocurrido un error, vuelve a intentarlo m\xe1s tarde!","error_adding_favorite");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(b.a.mark((function e(t,n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(m.c)(k,"usuarios",n),e.prev=1,e.next=4,Object(m.e)(c,{favorites:Object(m.b)(t)});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),v("error","!Upss ha ocurrido un error, vuelve a intentarlo m\xe1s tarde!","error_updating_favorite");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(b.a.mark((function e(t,n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(m.c)(k,"usuarios",n),e.prev=1,e.next=4,Object(m.e)(c,{favorites:Object(m.a)(t)});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),v("error","!Upss ha ocurrido un error, vuelve a intentarlo m\xe1s tarde!","error_removing_favorite");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),C=n(73),P=n.n(C),F=function(e){return P()({method:"GET",url:e})},I=n(199),W=(n(137),n(8));function A(e){var t=e.url,n=e.user,r=Object(c.useState)(null),a=Object(u.a)(r,2),o=a[0],s=a[1],l=Object(c.useState)(0),j=Object(u.a)(l,2),b=j[0],p=j[1],h=Object(c.useState)(0),O=Object(u.a)(h,2),v=O[0],m=O[1],x=Object(c.useState)(!1),g=Object(u.a)(x,2),w=g[0],_=g[1];Object(c.useEffect)((function(){k.collection("usuarios").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(f.a)({id:e.id},e.data())})).filter((function(e){return e.id===n}));t!==b&&p(t[0])}))}),[o]),Object(c.useEffect)((function(){o||F(t).then((function(e){return s(e.data)}))}),[]),Object(c.useEffect)((function(){o&&b&&m(b.favorites)}),[b]),Object(c.useEffect)((function(){v&&(v.includes(o.id)?_(!0):_(!1))}),[b,v]);return function(){if(o){var e=o.name,t=o.id;return Object(W.jsxs)(i.b,{className:"poke-card container",to:{pathname:"/pokemon/".concat(e),state:{pokemon:o,isFavorite:w}},children:[Object(W.jsxs)("div",{className:"poke-card__title",children:[Object(W.jsxs)("h5",{children:["#",t," - ",e]}),Object(W.jsx)(d.a,{name:t,onClick:function(e){!function(e){e.preventDefault(),_(!w),w?N(o.id,n):0!==b&&("object"===typeof b?E(o.id,n):S(o.id,n))}(e)},children:Object(W.jsx)(I.a,{name:t,children:w?"favorite":"favorite_border"})})]}),Object(W.jsx)("div",{className:"poke-card__body",children:Object(W.jsx)("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/".concat(t,".png"),alt:"logo pokemon #".concat(t)})})]})}return null}()}var L=n(48),U=function(){var e=Object(L.a)(g),t=Object(u.a)(e,3),n=t[0],r=t[1],a=(t[2],Object(s.f)());return Object(c.useEffect)((function(){if(!r)return n?void 0:a.replace("/")}),[n,r]),[n,r]};n(143);var B=function(){var e=Object(L.a)(g),t=Object(u.a)(e,3),n=t[0],r=(t[1],t[2],Object(c.useState)(null)),a=Object(u.a)(r,2),o=a[0],i=a[1],s=Object(c.useState)(null),f=Object(u.a)(s,2),j=f[0],b=f[1];U(),Object(c.useEffect)((function(){var e=function(){var e="https://pokeapi.co/api/v2/pokemon/?limit=20&offset=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);return P()({method:"GET",url:e})}(j);e.then((function(e){return i(e.data.results)})).catch((function(e){return v("error","\xa1Upps, parece que la base de datos de la pokedex est\xe1 en actualizaci\xf3n, prueba m\xe1s tarde!","getListadoError")}))}),[j]);var p=function(e){var t=e.name;"next"===t&&b(j+20),"back"===t&&b(j-20)};return Object(W.jsxs)(l.a,{children:[Object(W.jsx)("section",{className:"home",children:n&&function(){if(o&&n)return o.map((function(e){return Object(W.jsx)(A,{user:n.multiFactor.user.email,url:e.url},e.name)}))}()}),Object(W.jsxs)("div",{className:"home__nav-buttons",children:[Object(W.jsx)(d.a,{name:"back",onClick:function(e){var t=e.target;return p(t)},variant:"contained",children:"< Back"}),Object(W.jsx)(d.a,{name:"next",onClick:function(e){var t=e.target;return p(t)},variant:"contained",children:"Next >"})]})]})};n(144);var T=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),l=o[0],d=o[1],f=Object(L.a)(g),j=Object(u.a)(f,3),b=j[0],p=j[1],h=(j[2],Object(s.f)());return Object(c.useEffect)((function(){p||b&&h.push("/home")}),[b,p]),Object(W.jsx)("div",{className:"login",children:Object(W.jsxs)("div",{className:"login__container",children:[Object(W.jsx)("input",{type:"text",className:"login__textBox",value:n,onChange:function(e){return r(e.target.value)},placeholder:"E-mail Address"}),Object(W.jsx)("input",{type:"password",className:"login__textBox",value:l,onChange:function(e){return d(e.target.value)},placeholder:"Password"}),Object(W.jsx)("button",{className:"login__btn",onClick:function(){return y(n,l)},children:"Login"}),Object(W.jsx)("button",{className:"login__btn login__google",onClick:_,children:"Login with Google"}),Object(W.jsxs)("div",{children:["Don't have an account? ",Object(W.jsx)(i.b,{to:"/register",children:"Register"})," now."]})]})})},G=n(200),D=n(100),z=n.n(D);n(163);function J(e){var t=e.show,n=Object(c.useState)(!0),r=Object(u.a)(n,2),a=r[0],o=r[1];return Object(c.useEffect)((function(){null===t||void 0===t?setTimeout((function(){return o(!1)}),500):o(t)}),[t]),Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(G.a,{className:"loader-modal",open:a,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(W.jsx)(z.a,{type:"Grid",color:"#00BFFF",height:100,width:100,visible:a})})})}n(164);function K(e){var t=e.location.pathname,n=Object(c.useState)(null),r=Object(u.a)(n,2),a=r[0],o=r[1],i=Object(c.useState)(null),s=Object(u.a)(i,2),d=s[0],f=s[1],j=Object(c.useState)(!1),b=Object(u.a)(j,2);b[0],b[1];U(),Object(c.useEffect)((function(){a||F("".concat("https://pokeapi.co/api/v2").concat(t)).then((function(e){return o(e.data)}))}),[]),Object(c.useEffect)((function(){a&&!d&&function(e){var t="https://pokeapi.co/api/v2/pokemon-species/".concat(e,"/");return P()({method:"GET",url:t})}(a.id).then((function(e){return f(e.data)}))}),[a]);return function(){if(a){var e=a.name,t=a.id;return Object(W.jsxs)(l.a,{children:[Object(W.jsx)(J,{}),Object(W.jsxs)("section",{className:"detail-card container",to:"/".concat(e),children:[Object(W.jsxs)("div",{className:"detail-card__title",children:[Object(W.jsxs)("h3",{children:["#",t," - ",e]}),Object(W.jsx)(I.a,{name:t,children:"circle-border"})]}),Object(W.jsxs)("div",{className:"detail-card__body",children:[Object(W.jsx)("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/".concat(t,".png"),alt:"logo pokemon #".concat(t)}),Object(W.jsxs)("section",{children:[Object(W.jsx)("div",{className:"detail-card__types",children:a.types.map((function(e,t){return Object(W.jsx)("label",{children:e.type.name},"".concat(e.type.name,"-").concat(t))}))}),d&&Object(W.jsx)("h5",{children:d.flavor_text_entries[10].flavor_text}),d&&Object(W.jsxs)("h5",{children:["Growth rate: ",d.growth_rate.name]})]})]})]})]})}return null}()}var H=n(20);function R(){var e=Object(L.a)(g),t=Object(u.a)(e,3),n=t[0],r=(t[1],t[2],Object(c.useState)([])),a=Object(u.a)(r,2),o=a[0],i=a[1],s=Object(c.useState)(0),d=Object(u.a)(s,2),j=d[0],b=d[1],p=Object(c.useState)(null),h=Object(u.a)(p,2),O=h[0],v=h[1];Object(c.useEffect)((function(){if(n)k.collection("usuarios").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(f.a)({id:e.id},e.data())})).filter((function(e){return e.id===n.multiFactor.user.email}));b(t[0])}))}),[]),Object(c.useEffect)((function(){O&&(O.sort((function(e,t){return e-t})),O.reverse().map((function(e){return i((function(t){return[(n=e,"https://pokeapi.co/api/v2/pokemon/".concat(n))].concat(Object(H.a)(t));var n}))})))}),[O]),Object(c.useEffect)((function(){j&&v(j.favorites)}),[j]);return Object(W.jsx)(l.a,{children:Object(W.jsx)("section",{className:"home",children:function(){if(o&&n)return o.map((function(e,t){return Object(W.jsx)(A,{user:n.multiFactor.user.email,url:e},"favorite-".concat(t))}))}()})})}var q=n(205),M=n(206),Z=(n(165),["/home","/favorites"]);function $(e){var t=e.children,n=Object(s.f)(),r=Object(c.useState)(Z.indexOf(n.location.pathname)),a=Object(u.a)(r,2),o=a[0],i=a[1];return Object(c.useEffect)((function(){console.log("value: ",o,typeof o),[0,1].includes(o)?n.push(Z[o]):2===parseInt(o)&&g.signOut()}),[o]),Object(W.jsxs)("section",{className:"layout",children:[t,Object(W.jsxs)(q.a,{showLabels:!0,value:o,onChange:function(e,t){i(t)},children:[Object(W.jsx)(M.a,{label:"Home",icon:Object(W.jsx)(I.a,{children:"home"})}),Object(W.jsx)(M.a,{label:"Favorites",icon:Object(W.jsx)(I.a,{children:"favorite"})}),Object(W.jsx)(M.a,{label:"Logout",icon:Object(W.jsx)(I.a,{children:"logout"})})]})]})}n(168);function Q(){return Object(W.jsxs)(i.a,{basename:"/test-frontend",children:[Object(W.jsxs)(s.c,{children:[Object(W.jsx)(s.a,{exact:!0,path:"/",component:T}),Object(W.jsx)(s.a,{children:Object(W.jsx)($,{children:Object(W.jsxs)(s.c,{children:[Object(W.jsx)(s.a,{exact:!0,path:"/home",component:B}),Object(W.jsx)(s.a,{exact:!0,path:"/favorites",component:R}),Object(W.jsx)(s.a,{exact:!0,path:"/pokemon/:name",component:K})]})})})]}),Object(W.jsx)(O.a,{position:"top-right",autoClose:2500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(W.jsx)(O.a,{})]})}var V=function(){return Object(W.jsx)(Q,{})},X=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,207)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(W.jsx)(r.a.StrictMode,{children:Object(W.jsx)(V,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/test-frontend",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/test-frontend","/service-worker.js");X?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Y(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Y(t,e)}))}}(),ee()}},[[169,1,2]]]);
//# sourceMappingURL=main.b5be7914.chunk.js.map