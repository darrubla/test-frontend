(this["webpackJsonptest-frontend"]=this["webpackJsonptest-frontend"]||[]).push([[0],{114:function(e,t,n){},115:function(e,t,n){},137:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(43),o=n.n(c),s=(n(114),n(115),n(46)),i=n(22),u=n(15),l=n(205),d=n(204),j=n(69),f=n(0),b=n.n(f),p=n(2),h=n(80),v=(n(117),n(171),n(63)),O=function(e,t,n){v.b[{success:"success",error:"error",info:"info"}[e]](t,{toastId:n})},m=n(48),x=h.a.initializeApp({apiKey:"AIzaSyChPfb0-bn7Wgji2NDlJKKvSeD7ZUhuWk0",authDomain:"test-front-beccd.firebaseapp.com",projectId:"test-front-beccd",storageBucket:"test-front-beccd.appspot.com",messagingSenderId:"389550173889",appId:"1:389550173889:web:f90b37bece219bb53d6e40"}),g=x.auth(),k=x.firestore(),w=new h.a.auth.GoogleAuthProvider,_=function(){var e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.signInWithPopup(w);case 3:return t=e.sent,n=t.user,e.next=7,k.collection("users").where("uid","==",n.uid).get();case 7:if(0!==e.sent.docs.length){e.next=11;break}return e.next=11,k.collection("users").add({uid:n.uid,name:n.displayName,authProvider:"google",email:n.email});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O("error","!Upss el usuario no se ha podido conectar, por favor verifica tus datos!","error_adding_favorite");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.signInWithEmailAndPassword(t,n);case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),O("error","!Upss el usuario no existe en nuestra base, por favor revisa tus datos!","error_auth");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(b.a.mark((function e(t,n,r){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.createUserWithEmailAndPassword(n,r);case 3:return a=e.sent,c=a.user,e.next=7,k.collection("users").add({uid:c.uid,name:t,authProvider:"local",email:n});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),O("error","!Upss el usuario no se ha podido crear, por favor verifica tus datos!","error_register");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.d)(Object(m.c)(k,"usuarios",n),{favorites:[t]});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),O("error","!Upss ha ocurrido un error, vuelve a intentarlo m\xe1s tarde!","error_adding_favorite");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(m.c)(k,"usuarios",n),e.prev=1,e.next=4,Object(m.e)(r,{favorites:Object(m.b)(t)});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),O("error","!Upss ha ocurrido un error, vuelve a intentarlo m\xe1s tarde!","error_updating_favorite");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(m.c)(k,"usuarios",n),e.prev=1,e.next=4,Object(m.e)(r,{favorites:Object(m.a)(t)});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),O("error","!Upss ha ocurrido un error, vuelve a intentarlo m\xe1s tarde!","error_removing_favorite");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),A=n(73),C=n.n(A),F=function(e){return C()({method:"GET",url:e})},W=n(200),B=(n(137),n(8));function I(e){var t=e.url,n=e.user,a=Object(r.useState)(null),c=Object(u.a)(a,2),o=c[0],i=c[1],l=Object(r.useState)(0),f=Object(u.a)(l,2),b=f[0],p=f[1],h=Object(r.useState)(0),v=Object(u.a)(h,2),O=v[0],m=v[1],x=Object(r.useState)(!1),g=Object(u.a)(x,2),w=g[0],_=g[1];Object(r.useEffect)((function(){k.collection("usuarios").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(j.a)({id:e.id},e.data())})).filter((function(e){return e.id===n}));t!==b&&p(t[0])}))}),[o]),Object(r.useEffect)((function(){o||F(t).then((function(e){return i(e.data)}))}),[]),Object(r.useEffect)((function(){o&&b&&m(b.favorites)}),[b]),Object(r.useEffect)((function(){O&&(O.includes(o.id)?_(!0):_(!1))}),[b,O]);return function(){if(o){var e=o.name,t=o.id;return Object(B.jsxs)(s.b,{className:"poke-card container",to:{pathname:"/pokemon/".concat(e),state:{pokemon:o,isFavorite:w}},children:[Object(B.jsxs)("div",{className:"poke-card__title",children:[Object(B.jsxs)("h5",{children:["#",t," - ",e]}),Object(B.jsx)(d.a,{name:t,onClick:function(e){!function(e){e.preventDefault(),_(!w),w?P(o.id,n):0!==b&&("object"===typeof b?E(o.id,n):S(o.id,n))}(e)},children:Object(B.jsx)(W.a,{name:t,children:w?"favorite":"favorite_border"})})]}),Object(B.jsx)("div",{className:"poke-card__body",children:Object(B.jsx)("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/".concat(t,".png"),alt:"logo pokemon #".concat(t)})})]})}return null}()}var U=n(201),L=n(100),T=n.n(L);n(161);function z(e){var t=e.show,n=Object(r.useState)(!0),a=Object(u.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){null===t||void 0===t?setTimeout((function(){return o(!1)}),500):o(t)}),[t]),Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(U.a,{className:"loader-modal",open:c,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(B.jsx)(T.a,{type:"Grid",color:"#00BFFF",height:100,width:100,visible:c})})})}var G=n(42),H=function(){var e=Object(G.a)(g),t=Object(u.a)(e,3),n=t[0],a=t[1],c=(t[2],Object(i.f)());return Object(r.useEffect)((function(){if(!a)return n?void 0:c.replace("/")}),[n,a]),[n,a]};n(162);var Z=function(){var e=Object(G.a)(g),t=Object(u.a)(e,3),n=t[0],a=(t[1],t[2],Object(r.useState)(null)),c=Object(u.a)(a,2),o=c[0],s=c[1],i=Object(r.useState)(null),j=Object(u.a)(i,2),f=j[0],b=j[1];H(),Object(r.useEffect)((function(){var e=function(){var e="https://pokeapi.co/api/v2/pokemon/?limit=20&offset=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);return C()({method:"GET",url:e})}(f);e.then((function(e){return s(e.data.results)})).catch((function(e){return O("error","\xa1Upps, parece que la base de datos de la pokedex est\xe1 en actualizaci\xf3n, prueba m\xe1s tarde!","getListadoError")}))}),[f]);var p=function(e){var t=e.name;"next"===t&&b(f+20),"back"===t&&b(f-20)};return Object(B.jsxs)(l.a,{children:[Object(B.jsx)(z,{}),Object(B.jsx)("section",{className:"home",children:n&&function(){if(o&&n)return o.map((function(e){return Object(B.jsx)(I,{user:n.multiFactor.user.email,url:e.url},e.name)}))}()}),Object(B.jsxs)("div",{className:"home__nav-buttons",children:[Object(B.jsx)(d.a,{name:"back",onClick:function(e){var t=e.target;return p(t)},variant:"contained",children:"< Back"}),Object(B.jsx)(d.a,{name:"next",onClick:function(e){var t=e.target;return p(t)},variant:"contained",children:"Next >"})]})]})};n(163);var D=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(u.a)(c,2),l=o[0],d=o[1],j=Object(G.a)(g),f=Object(u.a)(j,3),b=f[0],p=f[1],h=(f[2],Object(i.f)());return Object(r.useEffect)((function(){p||b&&h.push("/home")}),[b,p]),Object(B.jsxs)("div",{className:"login",children:[Object(B.jsx)("h1",{children:"Pokemon Test"}),Object(B.jsxs)("div",{className:"login__container",children:[Object(B.jsx)("input",{type:"text",className:"login__textBox",value:n,onChange:function(e){return a(e.target.value)},placeholder:"E-mail Address"}),Object(B.jsx)("input",{type:"password",className:"login__textBox",value:l,onChange:function(e){return d(e.target.value)},placeholder:"Password"}),Object(B.jsx)("button",{className:"login__btn",onClick:function(){l.length<6?O("error","!Hola, por favor valida que tu contrase\xf1a tenga 6 o m\xe1s car\xe1cteres!","error_pwd"):n.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/g)?y(n,l):O("error","!Hola, por favor escribe un correo v\xe1lido!","error_pwd")},children:"Login"}),Object(B.jsx)("button",{className:"login__btn login__google",onClick:_,children:"Login with Google"}),Object(B.jsxs)("span",{children:["Don't have an account? ",Object(B.jsx)(s.b,{to:"/register",children:"Register"})," now."]})]})]})};n(164);function $(e){var t=e.location.pathname,n=Object(r.useState)(null),a=Object(u.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(null),i=Object(u.a)(s,2),d=i[0],j=i[1],f=Object(r.useState)(!1),b=Object(u.a)(f,2);b[0],b[1];H(),Object(r.useEffect)((function(){c||F("".concat("https://pokeapi.co/api/v2").concat(t)).then((function(e){return o(e.data)}))}),[]),Object(r.useEffect)((function(){c&&!d&&function(e){var t="https://pokeapi.co/api/v2/pokemon-species/".concat(e,"/");return C()({method:"GET",url:t})}(c.id).then((function(e){return j(e.data)}))}),[c]);return function(){if(c){var e=c.name,t=c.id;return Object(B.jsxs)(l.a,{children:[Object(B.jsx)(z,{}),Object(B.jsxs)("section",{className:"detail-card container",to:"/".concat(e),children:[Object(B.jsxs)("div",{className:"detail-card__title",children:[Object(B.jsxs)("h3",{children:["#",t," - ",e]}),Object(B.jsx)(W.a,{name:t,children:"circle-border"})]}),Object(B.jsxs)("div",{className:"detail-card__body",children:[Object(B.jsx)("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/".concat(t,".png"),alt:"logo pokemon #".concat(t)}),Object(B.jsxs)("section",{children:[Object(B.jsx)("div",{className:"detail-card__types",children:c.types.map((function(e,t){return Object(B.jsx)("label",{children:e.type.name},"".concat(e.type.name,"-").concat(t))}))}),d&&Object(B.jsx)("h5",{children:d.flavor_text_entries[10].flavor_text}),d&&Object(B.jsxs)("h5",{children:["Growth rate: ",d.growth_rate.name]})]})]})]})]})}return null}()}var q=n(20);function J(){var e=Object(G.a)(g),t=Object(u.a)(e,3),n=t[0],a=(t[1],t[2],Object(r.useState)([])),c=Object(u.a)(a,2),o=c[0],s=c[1],i=Object(r.useState)(0),d=Object(u.a)(i,2),f=d[0],b=d[1],p=Object(r.useState)(null),h=Object(u.a)(p,2),v=h[0],O=h[1];Object(r.useEffect)((function(){if(n)k.collection("usuarios").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(j.a)({id:e.id},e.data())})).filter((function(e){return e.id===n.multiFactor.user.email}));b(t[0])}))}),[]),Object(r.useEffect)((function(){v&&(v.sort((function(e,t){return e-t})),v.reverse().map((function(e){return s((function(t){return[(n=e,"https://pokeapi.co/api/v2/pokemon/".concat(n))].concat(Object(q.a)(t));var n}))})))}),[v]),Object(r.useEffect)((function(){f&&O(f.favorites)}),[f]);return Object(B.jsxs)(l.a,{children:[Object(B.jsx)(z,{}),Object(B.jsx)("section",{className:"home",children:function(){if(o&&n)return o.map((function(e,t){return Object(B.jsx)(I,{user:n.multiFactor.user.email,url:e},"favorite-".concat(t))}))}()})]})}n(165);var K=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(u.a)(c,2),l=o[0],d=o[1],j=Object(r.useState)(""),f=Object(u.a)(j,2),b=f[0],p=f[1],h=Object(G.a)(g),v=Object(u.a)(h,3),m=v[0],x=v[1],k=(v[2],Object(i.f)());return Object(r.useEffect)((function(){x||m&&k.push("/home")}),[m,x]),Object(B.jsxs)("div",{className:"register",children:[Object(B.jsx)("h1",{children:"Pokemon Test"}),Object(B.jsxs)("div",{className:"register__container",children:[Object(B.jsx)("input",{type:"text",className:"register__textBox",value:n,onChange:function(e){var t=e.target;return a(t.value)},placeholder:"Full Name"}),Object(B.jsx)("input",{type:"text",className:"register__textBox",value:l,onChange:function(e){var t=e.target;return d(t.value)},placeholder:"E-mail Address"}),Object(B.jsx)("input",{type:"password",className:"register__textBox",value:b,onChange:function(e){var t=e.target;return p(t.value)},placeholder:"Password"}),Object(B.jsx)("button",{className:"register__btn",onClick:function(){b.length<6?O("error","!Hola, por favor valida que tu contrase\xf1a tenga 6 o m\xe1s car\xe1cteres!","error_pwd"):l.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/g)?n.length<1?O("error","!Hola, por favor escribe tu nombre completo!","error_name"):N(n,l,b):O("error","!Hola, por favor escribe un correo v\xe1lido!","error_pwd")},children:"Register"}),Object(B.jsxs)("span",{children:["Already have an account? ",Object(B.jsx)(s.b,{to:"/",children:"Login"})," now."]})]})]})},R=n(206),M=n(207),Q=(n(166),["/home","/favorites"]);function V(e){var t=e.children,n=Object(i.f)(),a=Object(r.useState)(Q.indexOf(n.location.pathname)),c=Object(u.a)(a,2),o=c[0],s=c[1];return Object(r.useEffect)((function(){[0,1].includes(o)?n.push(Q[o]):2===parseInt(o)&&(g.signOut(),n.push("/"))}),[o]),Object(B.jsxs)("section",{className:"layout",children:[t,Object(B.jsxs)(R.a,{showLabels:!0,value:o,onChange:function(e,t){s(t)},children:[Object(B.jsx)(M.a,{label:"Home",icon:Object(B.jsx)(W.a,{children:"home"})}),Object(B.jsx)(M.a,{label:"Favorites",icon:Object(B.jsx)(W.a,{children:"favorite"})}),Object(B.jsx)(M.a,{label:"Logout",icon:Object(B.jsx)(W.a,{children:"logout"})})]})]})}n(169);function X(){return Object(B.jsxs)(s.a,{basename:"/test-frontend",children:[Object(B.jsxs)(i.c,{children:[Object(B.jsx)(i.a,{exact:!0,path:"/",component:D}),Object(B.jsx)(i.a,{exact:!0,path:"/register",component:K}),Object(B.jsx)(i.a,{children:Object(B.jsx)(V,{children:Object(B.jsxs)(i.c,{children:[Object(B.jsx)(i.a,{exact:!0,path:"/home",component:Z}),Object(B.jsx)(i.a,{exact:!0,path:"/favorites",component:J}),Object(B.jsx)(i.a,{exact:!0,path:"/pokemon/:name",component:$})]})})})]}),Object(B.jsx)(v.a,{position:"top-right",autoClose:2500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(B.jsx)(v.a,{})]})}var Y=function(){return Object(B.jsx)(X,{})},ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,208)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(Y,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/test-frontend",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/test-frontend","/service-worker.js");ee?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):te(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):te(t,e)}))}}(),ne()}},[[170,1,2]]]);
//# sourceMappingURL=main.19cb58b7.chunk.js.map